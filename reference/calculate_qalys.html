<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Generic for calculating quality of life years (QALY) metrics for
EQ5D survey respondents."><title>Calculate quality of life years — calculate_qalys • surveyTools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate quality of life years — calculate_qalys"><meta property="og:description" content="Generic for calculating quality of life years (QALY) metrics for
EQ5D survey respondents."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">surveyTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/surveyTools.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/example_analysis.html">Example analysis</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/TimTaylor/surveyTools/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Calculate quality of life years</h1>
      <small class="dont-index">Source: <a href="https://github.com/TimTaylor/surveyTools/blob/HEAD/R/calculate_qalys.R" class="external-link"><code>R/calculate_qalys.R</code></a></small>
      <div class="d-none name"><code>calculate_qalys.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generic for calculating quality of life years (QALY) metrics for
EQ5D survey respondents.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calculate_qalys</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">calculate_qalys</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for EQ5D</span></span>
<span><span class="fu">calculate_qalys</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">time_index</span>,</span>
<span>  <span class="va">type</span>,</span>
<span>  <span class="va">country</span>,</span>
<span>  units <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"days"</span>, <span class="st">"weeks"</span>, <span class="st">"months"</span>, <span class="st">"quarters"</span>, <span class="st">"years"</span><span class="op">)</span>,</span>
<span>  baseline_survey <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for utility</span></span>
<span><span class="fu">calculate_qalys</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">time_index</span>,</span>
<span>  units <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"days"</span>, <span class="st">"weeks"</span>, <span class="st">"months"</span>, <span class="st">"quarters"</span>, <span class="st">"years"</span><span class="op">)</span>,</span>
<span>  baseline_survey <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>An <span style="R">R</span> object.</p></dd>


<dt>...</dt>
<dd><p>Further arguments passed to or from other methods.</p></dd>


<dt>time_index</dt>
<dd><p><code>[character]</code> Name of variable in x representing the
relative time within the survey framework.</p></dd>


<dt>type</dt>
<dd><p><code>[character]</code> Method type(s) used for calculating the value sets.</p>
<p>For EQ5D3L inputs this can be:</p><ul><li><p>"TTO", the time trade-off valuation technique;</p></li>
<li><p>"VAS", the visual analogue scale valuation technique;</p></li>
<li><p>"RCW", a reverse crosswalk conversion to EQ5D5L values; or</p></li>
<li><p>"DSU", the NICE Decision Support Unit's model that allows mappings on to
EQ5D5L values accounting for both age and sex.</p></li>
</ul><p>For EQ5D5L inputs this can be:</p><ul><li><p>"VT",  value sets generated via a EuroQol standardised valuation study
protocol;</p></li>
<li><p>"CW",  a crosswalk conversion EQ5D3L values; or</p></li>
<li><p>"DSU", the NICE Decision Support Unit's model that allows mappings on to
EQ5D5L values accounting for both age and sex.</p></li>
</ul></dd>


<dt>country</dt>
<dd><p><code>[character]</code> Value set countries to use.</p></dd>


<dt>units</dt>
<dd><p><code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> The units of the <code>time_index</code> column of <code>x</code>. Can
be one of "days", "weeks", "months", "quarters" or "years". Note that the
output will always be a QALY (i.e years) irrespective of the unit input.</p></dd>


<dt>baseline_survey</dt>
<dd><p>(optional) Either a <code>character</code> string specifying the
surveyID, to use as a baseline or a data frame. If a data frame, it must have
at least two columns; one for the respondentID (with name matching that in
<code>x</code> input) and another (of any name) for the associated utility values. If
desired you can also specify columns that match on the utility and country
type columns of the input <code>x</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The methods provided for <code><a href="new_utility.html">utility</a></code> and  <code><a href="new_eq5d.html">EQ5D</a></code>
objects, return two metrics by default:</p><ul><li><p>Firstly, a <code>raw</code> QALY. This is the area under the utility curve scaled to
the proportion of the year it corresponds to.</p></li>
<li><p>Secondly, a <code>loss_v_fullhealth</code> value. This represents the loss from
perfect health which is calculated by assuming all dimensions are 1
to calculate a full health QALY value.</p></li>
</ul><p>Optionally, a third metric can also be returned, <code>loss_v_baseline</code>. This
represents the loss from a specified baseline utility value.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>If a character string <code>baseline_survey</code> argument is given then this must match
a surveyID to match against.  In this situation the survey <strong>is</strong> still
included in the unadjusted, <code>raw</code>, calculation, prior to the calculation of
loss.</p>
<p>Alternatively the <code>baseline_survey</code> argument can be specified as a data frame
with a column corresponding to the respondentID and another representing the
associated utility. Optionally columns corresponding to the utility country
and utility type can be included to allow more granular comparisons. For this
specification of baseline, it <strong>is not</strong> included in the unadjusted, <code>raw</code>,
calculation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"EQ5D5L_surveys"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="as_eq5d.html">as_eq5d5l</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">EQ5D5L_surveys</span>,</span></span>
<span class="r-in"><span>    surveyID <span class="op">=</span> <span class="st">"surveyID"</span>,</span></span>
<span class="r-in"><span>    respondentID <span class="op">=</span> <span class="st">"respondentID"</span>,</span></span>
<span class="r-in"><span>    mobility <span class="op">=</span> <span class="st">"mobility"</span>,</span></span>
<span class="r-in"><span>    self_care <span class="op">=</span> <span class="st">"self_care"</span>,</span></span>
<span class="r-in"><span>    usual <span class="op">=</span> <span class="st">"usual"</span>,</span></span>
<span class="r-in"><span>    pain <span class="op">=</span> <span class="st">"pain"</span>,</span></span>
<span class="r-in"><span>    anxiety <span class="op">=</span> <span class="st">"anxiety"</span>,</span></span>
<span class="r-in"><span>    vas <span class="op">=</span> <span class="st">"vas"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>`surveyID` has been converted to an ordered factor with default levels</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> equivalent to `sort(unique(surveyID))`.</span>
<span class="r-in"><span><span class="fu">calculate_qalys</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">dat</span>,</span></span>
<span class="r-in"><span>    time_index <span class="op">=</span> <span class="st">"time_index"</span>,</span></span>
<span class="r-in"><span>    type <span class="op">=</span> <span class="st">"VT"</span>, country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Denmark"</span>, <span class="st">"France"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A data frame: 4,000 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    respondentID .utility_type .utility_country .qaly .value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>            1 VT            Denmark          raw    0.544</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>            1 VT            France           raw    0.573</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>            2 VT            Denmark          raw    0.487</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>            2 VT            France           raw    0.503</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>            3 VT            Denmark          raw    0.530</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>            3 VT            France           raw    0.577</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>            4 VT            Denmark          raw    0.276</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>            4 VT            France           raw    0.430</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>            5 VT            Denmark          raw    0.506</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>            5 VT            France           raw    0.575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 3,990 more rows</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>© <a href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/" class="external-link">Crown Copyright</a>, 2022, UKHSA.<br>The source code for the software is released under the MIT licence as per the the <a href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/open-government-licence/open-software-licences/" class="external-link">UK Government Licensing Framework</a> and the <a href="https://gds-way.cloudapps.digital/manuals/licensing.html" class="external-link">GDS Way licensing guidance</a>.<br>The documentation for the software is released under the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" class="external-link">Open Government Licence</a></p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
</div>

    </footer></div>

  

  

  </body></html>

